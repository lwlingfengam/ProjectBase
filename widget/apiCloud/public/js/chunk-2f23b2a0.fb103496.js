(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f23b2a0"],{"0d1a":function(e,t,n){var i=n("76cb");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("499e").default;a("8c2dd2d4",i,!0,{})},"0f4e":function(e,t,n){var i=n("875c");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("499e").default;a("76407a4c",i,!0,{})},"20fd":function(e,t,n){"use strict";var i=n("d9f6"),a=n("aebd");e.exports=function(e,t,n){t in e?i.f(e,t,a(0,n)):e[t]=n}},"37e2":function(e,t,n){"use strict";var i={name:"ItemGroup",props:{title:{type:String,default:"",required:!0},required:{type:Boolean,default:!1}},data:function(){return{}},methods:{}},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"itemGroup"},[n("div",{staticClass:"itemGroup_title",class:{itemGroup_title_required:e.required}},[e._v(e._s(e.title))]),e._v(" "),e._t("default")],2)},r=[],o=n("2455");function s(e){n("b742")}var c=!1,l=s,u="data-v-7677f8c8",d=null,f=Object(o["a"])(i,a,r,c,l,u,d);t["a"]=f.exports},5118:function(e,t,n){(function(e){var i="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(a.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("c8ba"))},"549b":function(e,t,n){"use strict";var i=n("d864"),a=n("63b6"),r=n("241e"),o=n("b0dc"),s=n("3702"),c=n("b447"),l=n("20fd"),u=n("7cd6");a(a.S+a.F*!n("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,a,d,f=r(e),p="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,v=void 0!==h,g=0,b=u(f);if(v&&(h=i(h,m>2?arguments[2]:void 0,2)),void 0==b||p==Array&&s(b))for(t=c(f.length),n=new p(t);t>g;g++)l(n,g,v?h(f[g],g):f[g]);else for(d=b.call(f),n=new p;!(a=d.next()).done;g++)l(n,g,v?o(d,h,[a.value,g],!0):a.value);return n.length=g,n}})},"54a1":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("95d5")},6017:function(e,t,n){(function(e,t){(function(e,n){"use strict";if(!e.setImmediate){var i,a=1,r={},o=!1,s=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?p():m()?h():e.MessageChannel?v():s&&"onreadystatechange"in s.createElement("script")?g():b(),c.setImmediate=l,c.clearImmediate=u}function l(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return r[a]=o,i(a),a++}function u(e){delete r[e]}function d(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i);break}}function f(e){if(o)setTimeout(f,0,e);else{var t=r[e];if(t){o=!0;try{d(t)}finally{u(e),o=!1}}}}function p(){i=function(e){t.nextTick(function(){f(e)})}}function m(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function h(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&f(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),i=function(n){e.postMessage(t+n,"*")}}function v(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;f(t)},i=function(t){e.port2.postMessage(t)}}function g(){var e=s.documentElement;i=function(t){var n=s.createElement("script");n.onreadystatechange=function(){f(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function b(){i=function(e){setTimeout(f,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n("c8ba"),n("4362"))},"75fc":function(e,t,n){"use strict";var i=n("a745"),a=n.n(i);function r(e){if(a()(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var o=n("774e"),s=n.n(o),c=n("c8bb"),l=n.n(c);function u(e){if(l()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return s()(e)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){return r(e)||u(e)||d()}n.d(t,"a",function(){return f})},"76cb":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"",""])},7746:function(e,t,n){"use strict";n.r(t);var i=n("5d73"),a=n.n(i),r=n("f499"),o=n.n(r),s=n("37e2"),c=(n("6762"),n("9865"),n("cebc")),l=(n("57e7"),n("7514"),n("ac6a"),n("f3e2"),n("75fc")),u=(n("c5f6"),n("c080")),d=n("6736"),f=function(e){return Object(u["f"])({url:d["a"].admin.file.uploadFile,formData:e})},p=function(e){return Object(u["b"])({url:d["a"].admin.file.downloadFile+"/"+e})},m=function(e){return Object(u["a"])({url:d["a"].admin.file.deleteFile+"/"+e})},h=n("ca00"),v=n("5118"),g={name:"SUpload",props:{accept:{type:String,default:null},maxFileSize:{type:Number,default:2097152},uploadText:{type:String,default:"正在上传，请稍等"},name:{type:String,default:""},authenticationType:{type:String,default:null},permissions:{type:Array,default:null},updatePermissions:{type:Array,default:null},deletePermissions:{type:Array,default:null},uploadSuccess:{type:Function,default:null,required:!1},needShowResult:{type:Boolean,default:!0,required:!1}},data:function(){return{fileList:[],isDisabled:!1,uploadResult:[],previewImgs:[]}},computed:{hasPreviewImg:function(){return this.needShowResult&&this.previewImgs&&this.previewImgs.length>0}},methods:{refresh:function(){this.fileList=[],this.isDisabled=!1,this.uploadResult=[],this.previewImgs=[]},getUploadResult:function(){return this.uploadResult},beforeRead:function(e,t){return!0},afterRead:function(e,t){var n=this,i=e.file;this.fileList=[].concat(Object(l["a"])(this.fileList),[i]);var r=new FormData;this.fileList.forEach(function(e){r.append("files[]",e)}),Object(h["e"])(this.authenticationType)&&r.append("authenticationType",this.authenticationType),Object(h["e"])(this.permissions)&&r.append("permissions",o()(this.permissions)),Object(h["e"])(this.updatePermissions)&&r.append("updatePermissions",o()(this.updatePermissions)),Object(h["e"])(this.permissions)&&r.append("deletePermissions",o()(this.deletePermissions)),this.isDisabled=!0,this.$toast.loading({mask:!0,message:"正在上传，请稍等..."}),f(r).then(function(e){var t=!0,i=!1,r=void 0;try{for(var o,s=a()(e);!(t=(o=s.next()).done);t=!0){var c=o.value;n.uploadResult.push(c),n.isImg(c.FileName)&&n.addPrevieImgs(c)}}catch(l){i=!0,r=l}finally{try{t||null==s.return||s.return()}finally{if(i)throw r}}n.uploadSuccess&&n.uploadSuccess(e),n.$toast.success("上传成功")}).catch(function(){}).finally(function(){n.fileList=[],n.isDisabled=!1})},removeFile:function(e){var t=this;this.$dialog.confirm({message:"您确认要删除该附件吗"}).then(function(){t.$toast.loading({mask:!0,message:"正在删除，请稍等..."}),m(e).then(function(n){t.removeItemForUploadResult(e),t.removeItemForPrevieImgs(e),t.$toast.success("删除成功")}).catch(function(){}).finally(function(){})}).catch(function(){})},removeItemForUploadResult:function(e){var t=this.uploadResult.find(function(t){return t.FileCode===e});if(t){var n=this.uploadResult.indexOf(t);this.uploadResult.splice(n,1)}},removeItemForPrevieImgs:function(e){var t=this.previewImgs.find(function(t){return t.FileCode===e});if(t){var n=this.previewImgs.indexOf(t);this.previewImgs.splice(n,1)}},addPrevieImgs:function(e){var t=this,n=Object(v["setTimeout"])(function(){p(e.FileCode).then(function(i){window.URL=window.URL||window.webkitURL;var a=window.URL.createObjectURL(i),r=Object(c["a"])({},e,{Url:a});t.previewImgs.push(r),Object(v["clearTimeout"])(n)}).catch(function(){})},200)},isImg:function(e){var t=["png","jpg","gif","bmp"],n="",i=e.lastIndexOf(".");return i>-1&&(n=e.substr(i+1)),t.includes(n)}}},b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-uploader",{attrs:{accept:e.accept,disabled:e.isDisabled,"max-size":e.maxFileSize,"upload-text":e.uploadText,"before-read":e.beforeRead,"after-read":e.afterRead}},[n("van-icon",{attrs:{name:"plus"}})],1),e._v(" "),e.hasPreviewImg?n("ul",{staticClass:"upload-result"},e._l(e.previewImgs,function(t,i){return n("li",{key:i,staticClass:"item"},[n("img",{attrs:{src:t.Url,alt:t.FileName,title:t.FileName}}),e._v(" "),n("van-icon",{staticClass:"close",attrs:{name:"clear"},on:{click:function(n){return e.removeFile(t.FileCode)}}})],1)}),0):e._e()],1)},y=[],w=n("2455");function I(e){n("0f4e")}var k=!1,_=I,x="data-v-4f487ccf",F=null,O=Object(w["a"])(g,b,y,k,_,x,F),T=O.exports,j=n("37a2"),R="image/*",B={name:"AdviceFeedback",components:{ItemGroup:s["a"],SUpload:T},data:function(){return{loading:!1,access:R,feedBack:{title:"",contact:"",describe:"",images:""},error:{title:"",contact:"",describe:""}}},methods:{getImages:function(){var e=[],t="",n=this.$refs.myupload.getUploadResult();if(n&&n.length>0){var i=!0,r=!1,s=void 0;try{for(var c,l=a()(n);!(i=(c=l.next()).done);i=!0){var u=c.value,d={fileName:u.FileName,fileCode:u.FileCode};e.push(d)}}catch(f){r=!0,s=f}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}t=o()(e)}return t},save:function(){var e=this;this.validateInput()&&(this.images=this.getImages(),console.log("images",this.images),this.loading=!0,Object(j["e"])(this.feedBack).then(function(){e.$toast.success("保存成功"),e.feedBack.title="",e.feedBack.contact="",e.feedBack.describe="",e.feedBack.images="",e.$refs.myupload.refresh()}).catch(function(){}).finally(function(){e.loading=!1}))},validateInput:function(){this.error.title="",this.error.contact="",this.error.describe="";var e=!1;return Object(h["d"])(this.feedBack.title)&&(this.error.title="遇到的问题必填",e=!0),Object(h["d"])(this.feedBack.describe)&&(this.error.describe="描述具体问题必填",e=!0),Object(h["d"])(this.feedBack.contact)&&(this.error.contact="联系方式必填",e=!0),!e}}},S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("item-group",{attrs:{title:"遇到的问题",required:""}},[n("van-field",{attrs:{placeholder:"请输入遇到的问题","error-message":e.error.title},model:{value:e.feedBack.title,callback:function(t){e.$set(e.feedBack,"title",t)},expression:"feedBack.title"}})],1),e._v(" "),n("item-group",{attrs:{title:"描述具体问题",required:""}},[n("van-field",{attrs:{type:"textarea",rows:"2",autosize:"",placeholder:"请输入描述具体问题","error-message":e.error.describe},model:{value:e.feedBack.describe,callback:function(t){e.$set(e.feedBack,"describe",t)},expression:"feedBack.describe"}})],1),e._v(" "),n("item-group",{attrs:{title:"请提供相关问题的截图或照片"}},[n("s-upload",{ref:"myupload",attrs:{accept:e.access}})],1),e._v(" "),n("item-group",{attrs:{title:"您的联系方式",required:""}},[n("van-field",{attrs:{placeholder:"请输入联系方式","error-message":e.error.contact},model:{value:e.feedBack.contact,callback:function(t){e.$set(e.feedBack,"contact",t)},expression:"feedBack.contact"}})],1),e._v(" "),n("div",{staticClass:"operate-area"},[n("van-button",{attrs:{type:"info",loading:e.loading},on:{click:e.save}},[e._v("保存")])],1)],1)},C=[];function P(e){n("0d1a")}var $=!1,A=P,L="data-v-83611ad6",U=null,E=Object(w["a"])(B,S,C,$,A,L,U);t["default"]=E.exports},"774e":function(e,t,n){e.exports=n("d2d5")},"875c":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"\n.upload-result[data-v-4f487ccf] {\n  margin-top: 0.2rem;\n}\n.upload-result ul[data-v-4f487ccf] {\n  width: 100%;\n}\n.upload-result .item[data-v-4f487ccf] {\n  margin-left: 0.28rem;\n  margin-right: 0.2rem;\n  margin-bottom: 0.2rem;\n  display: inline-block;\n  position: relative;\n  border: 0.02rem solid #e4e6f0;\n  width: 2rem;\n  height: 2rem;\n  text-align: center;\n}\n.upload-result .item img[data-v-4f487ccf] {\n  width: 1.6rem;\n  height: 1.6rem;\n  margin-top: 0.2rem;\n}\n.upload-result .item .close[data-v-4f487ccf] {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n",""])},"95d5":function(e,t,n){var i=n("40c3"),a=n("5168")("iterator"),r=n("481b");e.exports=n("584a").isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||r.hasOwnProperty(i(t))}},b742:function(e,t,n){var i=n("bc6c");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("499e").default;a("42aca0a8",i,!0,{})},bc6c:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"\n.itemGroup[data-v-7677f8c8] {\n  position: relative;\n}\n.itemGroup .itemGroup_title[data-v-7677f8c8] {\n  height: 0.88rem;\n  line-height: 0.88rem;\n  padding-left: 0.36rem;\n  padding-top: 0.1rem;\n  padding-right: 0;\n  padding-bottom: 0;\n  background-color: #F1F2F7;\n}\n.itemGroup .itemGroup_title_required[data-v-7677f8c8]::before {\n  content: '*';\n  position: absolute;\n  top: 0.12rem;\n  left: 0.1rem;\n  font-size: 0.24rem;\n  color: #f44;\n}\n",""])},c8bb:function(e,t,n){e.exports=n("54a1")},d2d5:function(e,t,n){n("1654"),n("549b"),e.exports=n("584a").Array.from}}]);